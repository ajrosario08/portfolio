var pageViewController={toggleMoblieMenu:function(){$("#pageHeader i").on("click",function(){"-240px"===$("#page-nav").css("left")?$("#page-nav").css("left",0):$("#page-nav").css("left","-240px")})},toggleProjectsFilter:function(){$("#show-filters").on("click",function(){"Show filter"===$(this).text()?($("#projects-filters ul").show(),$(this).text("Hide filter")):($("#projects-filters ul").hide(),$(this).text("Show filter"))})}};$(function(){pageViewController.toggleMoblieMenu();pageViewController.toggleProjectsFilter()});
function Project(a){for(key in a)this[key]=a[key]}Project.all=[];Project.prototype.toHtml=function(a){a=Handlebars.compile(a.html());return a(this)};Project.loadAll=function(a){a.forEach(function(a){Project.all.push(new Project(a))})};Project.fetchAll=function(){localStorage.portfolioProjects?Project.processData(JSON.parse(localStorage.portfolioProjects)):$.getJSON("data/portfolioProjects.json",function(a){Project.processData(a)})};
Project.processData=function(a){Project.loadAll(a);localStorage.setItem("portfolioProjects",JSON.stringify(a));projectsView.initIndexPage()};
var projectsView={handleProjectsFilter:function(){$("#type-filter").on("change",function(){var a=$("article"),b=$(this).val();"show-all"===b?a.show():b?(a.hide(),a.each(function(){$(this).data("type")===b&&$(this).show()})):a.show();$("#type-filter").val("")})},handleMainNav:function(){$("#pageHeader nav").on("click","li",function(){var a=$(this).attr("data-content");"Github"!==$(this).find("a").text()&&($(".tab-content").hide(),$(".tab-content").each(function(){$(this).attr("id")===a&&$(this).show()}))})},
handleTruncatedDescription:function(){var a=$(".project-description p");a.each(function(){var a=$(this).text();100>a.length||$(this).html(a.slice(0,100)+'<span>... </span><a href="#" class="more">More</a><span class="less">'+a.slice(100,a.length)+' <a href="#" class="less">Less</a></span>')});$("a.more",a).click(function(a){a.preventDefault();$(this).hide().prev().hide();$(this).next().show()});$("a.less",a).click(function(a){a.preventDefault();$(this).parent().hide().prev().show().prev().show()})},
initIndexPage:function(){Project.all.forEach(function(a){0===$('#projects-filters option:contains("'+a.category+'")').length&&$("#type-filter").append(a.toHtml($("#type-filter-template")));$("#projects").append(a.toHtml($("#project-template")))});projectsView.handleMainNav();projectsView.handleProjectsFilter();projectsView.handleTruncatedDescription()}};
